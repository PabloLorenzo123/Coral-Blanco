{% extends '_base.html' %}

{% block title %}Hotel{% endblock title %}

{% block content %}
<!-- Room searchbar -->
    <form id="roomSearchForm" class="row bg-light p-2" action="{% url 'search_room' %}" method="get">
        <div class="row">
            <!--Dates-->
            <div class="col input-group">
                <input name="check_in_date" type="date" class="form-control" required min="{{ today|date:'Y-m-d' }}" required>
                <input name="check_out_date" type="date" class="form-control" required min="{{ tomorrow|date:'Y-m-d' }}" required>
            </div>
            <div class="col">
                <div class="row">
                    <!-- adults -->
                    <div class="col input-group">
                        <i class="fas fa-user-friends input-group-text"></i>
                        <select name="adults" class="form-select" required>
                            <option selected>Open this select menu</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                        </select>
                    </div>
                    <!--Children-->
                    <div class="col input-group">
                        <i class="fas fa-user-friends input-group-text"></i>
                        <select name="children" class="form-select" required>
                            <option selected>Open this select menu</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="col input-group">
                <button class="btn btn-success" onclick="validateForm(event)">Buscar</button>
            </div>
        </div>
    </form>     
<!-- End of room search bar -->

    <div class="p-4">
        <div class="jumbotron">
            <h1 class="display-4">Hotel</h1>
            <p class="lead">El <b>Hotel</b> es uno de los mejores hoteles en Punta Cana, ideal para disfrutar del sol, de la brisa del Caribe y de la belleza de un mar con arrecifes de coral y aguas cristalinas.</p>
            <hr class="my-4">
            <p>Ubicado a lo largo de una de las 10 mejores playas por National Geographic y Tripadvisor, este hotel 5 estrellas todo incluido en Punta Cana ofrece unas vacaciones de ensueño en su B-room con vistas, la mejor tecnología y detalles de lujo.
            </p>
            <p class="lead">
                <a class="btn btn-primary btn-lg" href="{% url 'rooms' %}" role="button">Habitaciones</a>
            </p>
    </div>
    <script>
        console.log("klk")
        function validateForm(event) {
            event.preventDefault(event)
    
            var form = document.getElementById('roomSearchForm');
            var checkInDate = new Date(form.elements['check_in_date'].value);
            var checkOutDate = new Date(form.elements['check_out_date'].value);
            var adults = form.elements['adults'].value;
            var children = form.elements['children'].value;
    
            // Perform validation logic here
            if (checkInDate >= checkOutDate) {
                alert("El check in no puede ser después del checkout.");
            } else if (!checkInDate || !checkOutDate || adults === "Open this select menu" || children === "Open this select menu") {
                alert("Por favor, llena todos los campos correctamente");
            } else {
                // Only submit the form if all conditions are met
                form.submit();
            }
        }
    </script> 
{% endblock content %}
